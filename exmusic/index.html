<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éŸ³ä¹æ ¼å¼è½¬æ¢å·¥å…· | å“åº”å¼</title>
    <link rel="icon" type="image/svg+xml" href="./favicon.svg">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #4F46E5;
            --primary-light: #6366F1;
            --secondary: #10B981;
            --gray-100: #F3F4F6;
            --gray-200: #E5E7EB;
            --gray-700: #374151;
            --gray-900: #111827;
            --white: #FFFFFF;
            --danger: #EF4444;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --radius: 8px;
        }

        body {
            background-color: var(--gray-100);
            color: var(--gray-900);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            max-width: 800px;
            width: 100%;
            background: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 2rem;
            margin: 20px auto;
        }

        header {
            text-align: center;
            margin-bottom: 2rem;
        }

        h1 {
            color: var(--primary);
            margin-bottom: 0.5rem;
            font-size: clamp(1.8rem, 4vw, 2.5rem);
        }

        .subtitle {
            color: var(--gray-700);
            font-size: clamp(1rem, 2vw, 1.2rem);
        }

        /* ä¸Šä¼ åŒºåŸŸ */
        .upload-section {
            border: 2px dashed var(--gray-200);
            border-radius: var(--radius);
            padding: 3rem 2rem;
            text-align: center;
            margin-bottom: 2rem;
            transition: border-color 0.3s ease;
            cursor: pointer;
        }

        .upload-section:hover {
            border-color: var(--primary);
        }

        .upload-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        #file-input {
            display: none;
        }

        /* æ ¼å¼é€‰æ‹©åŒºåŸŸ */
        .format-section {
            display: none;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background-color: var(--gray-100);
            border-radius: var(--radius);
        }

        .format-row {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .format-label {
            font-weight: 500;
            min-width: 120px;
        }

        select {
            flex: 1;
            min-width: 200px;
            padding: 0.8rem 1rem;
            border: 1px solid var(--gray-200);
            border-radius: var(--radius);
            font-size: 1rem;
            background-color: var(--white);
            cursor: pointer;
        }

        select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.1);
        }

        .format-note {
            font-size: 0.9rem;
            color: var(--gray-700);
            margin-top: 0.5rem;
            line-height: 1.5;
        }

        /* æŒ‰é’®æ ·å¼ */
        .btn {
            display: inline-block;
            background-color: var(--primary);
            color: var(--white);
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: var(--radius);
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin: 0.5rem 0.25rem;
        }

        .btn:hover {
            background-color: var(--primary-light);
        }

        .btn-secondary {
            background-color: var(--secondary);
        }

        .btn-secondary:hover {
            background-color: #059669;
        }

        .btn-danger {
            background-color: var(--danger);
        }

        .btn-danger:hover {
            background-color: #DC2626;
        }

        /* è¿›åº¦å’Œç»“æœåŒºåŸŸ */
        .progress-section {
            display: none;
            margin: 2rem 0;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: var(--gray-200);
            border-radius: 4px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--secondary);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .result-section {
            display: none;
            margin: 2rem 0;
        }

        .file-info {
            padding: 1rem;
            background-color: var(--gray-100);
            border-radius: var(--radius);
            margin-bottom: 1rem;
        }

        /* æç¤ºä¿¡æ¯ */
        .alert {
            padding: 1rem;
            border-radius: var(--radius);
            margin: 1rem 0;
            display: none;
        }

        .alert-success {
            background-color: rgba(16, 185, 129, 0.1);
            border: 1px solid var(--secondary);
            color: #065F46;
        }

        .alert-error {
            background-color: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--danger);
            color: #991B1B;
        }

        /* åŠ è½½åŠ¨ç”» */
        .loader {
            display: none;
            border: 4px solid var(--gray-200);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .footer {
            text-align: center;
            margin-top: 3rem;
            color: var(--gray-700);
            font-size: 0.9rem;
        }

        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .container {
                padding: 1.5rem;
            }
            
            .upload-section {
                padding: 2rem 1rem;
            }
            
            .format-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
            
            .format-label {
                min-width: auto;
            }
            
            select {
                width: 100%;
                min-width: auto;
            }
        }

        @media (max-width: 480px) {
            .btn {
                display: block;
                width: 100%;
                margin: 0.5rem 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>éŸ³ä¹æ ¼å¼è½¬æ¢å·¥å…·</h1>
            <p class="subtitle">çº¯å‰ç«¯å¤„ç† | æ”¯æŒå¤šç§éŸ³é¢‘æ ¼å¼äº’è½¬ | å“åº”å¼é€‚é…</p>
        </header>

        <!-- ä¸Šä¼ åŒºåŸŸ -->
        <div class="upload-section" id="upload-area">
            <div class="upload-icon">ğŸµ</div>
            <h3>ç‚¹å‡»æˆ–æ‹–æ‹½éŸ³é¢‘æ–‡ä»¶åˆ°æ­¤å¤„ä¸Šä¼ </h3>
            <p>æ”¯æŒ MP3ã€WAVã€FLACã€OGGã€AACã€M4A ç­‰æ ¼å¼</p>
            <input type="file" id="file-input" accept="audio/*">
            <button class="btn" id="select-file-btn">é€‰æ‹©éŸ³é¢‘æ–‡ä»¶</button>
        </div>

        <!-- æ ¼å¼é€‰æ‹©åŒºåŸŸ -->
        <div class="format-section" id="format-section">
            <h3>è½¬æ¢è®¾ç½®</h3>
            <div class="format-row">
                <label class="format-label">æºæ–‡ä»¶ä¿¡æ¯ï¼š</label>
                <span id="source-file-info">æœªé€‰æ‹©æ–‡ä»¶</span>
            </div>
            <div class="format-row">
                <label class="format-label">ç›®æ ‡æ ¼å¼ï¼š</label>
                <select id="target-format">
                    <option value="mp3" selected>MP3 (é€šç”¨æ ¼å¼ï¼Œä½“ç§¯å°)</option>
                    <option value="wav">WAV (æ— æŸï¼Œä½“ç§¯å¤§)</option>
                    <option value="flac">FLAC (æ— æŸå‹ç¼©ï¼Œæ¨è)</option>
                    <option value="m4a">M4A (AACç¼–ç ï¼Œè‹¹æœå¸¸ç”¨)</option>
                    <option value="ogg">OGG (å¼€æºæ ¼å¼)</option>
                </select>
            </div>
            <div class="format-row">
                <label class="format-label">éŸ³è´¨è®¾ç½®ï¼š</label>
                <select id="quality">
                    <option value="128">128 kbps (æ™®é€šéŸ³è´¨)</option>
                    <option value="192" selected>192 kbps (å¹³è¡¡éŸ³è´¨)</option>
                    <option value="256">256 kbps (é«˜å“è´¨)</option>
                    <option value="320">320 kbps (æ— æŸéŸ³è´¨)</option>
                </select>
            </div>
            <p class="format-note">
                ğŸ“Œ æç¤ºï¼šMP3 æ¨è 192-320 kbpsï¼›WAV/FLAC ä¸ºæ— æŸæ ¼å¼ï¼ŒéŸ³è´¨è®¾ç½®ä¸ç”Ÿæ•ˆï¼›
                æ‰€æœ‰è½¬æ¢å‡åœ¨æœ¬åœ°å®Œæˆï¼Œæ–‡ä»¶ä¸ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚
            </p>
            <button class="btn btn-secondary" id="convert-btn">å¼€å§‹è½¬æ¢</button>
            <button class="btn btn-danger" id="reset-btn">é‡æ–°é€‰æ‹©æ–‡ä»¶</button>
        </div>

        <!-- æç¤ºä¿¡æ¯ -->
        <div class="alert alert-success" id="success-alert"></div>
        <div class="alert alert-error" id="error-alert"></div>

        <!-- è¿›åº¦åŒºåŸŸ -->
        <div class="progress-section" id="progress-section">
            <h3>è½¬æ¢è¿›åº¦</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <p id="progress-text">å‡†å¤‡è½¬æ¢...</p>
            <div class="loader" id="loader"></div>
        </div>

        <!-- ç»“æœåŒºåŸŸ -->
        <div class="result-section" id="result-section">
            <h3>è½¬æ¢å®Œæˆ</h3>
            <div class="file-info">
                <p><strong>æ–‡ä»¶åï¼š</strong><span id="result-filename"></span></p>
                <p><strong>æ ¼å¼ï¼š</strong><span id="result-format"></span></p>
                <p><strong>éŸ³è´¨ï¼š</strong><span id="result-quality"></span></p>
            </div>
            <button class="btn btn-secondary" id="download-btn">ä¸‹è½½è½¬æ¢åçš„æ–‡ä»¶</button>
            <button class="btn" id="convert-another-btn">è½¬æ¢å¦ä¸€ä¸ªæ–‡ä»¶</button>
        </div>

        <div class="footer">
            <p>çº¯å‰ç«¯å®ç° | æ‰€æœ‰å¤„ç†å‡åœ¨æœ¬åœ°å®Œæˆï¼Œæ•°æ®ä¸ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨ | é€‚é…æ‰‹æœº/å¹³æ¿/ç”µè„‘</p>
        </div>
    </div>

    <!-- å¼•å…¥éŸ³é¢‘å¤„ç†åº“ï¼ˆCDNï¼‰ -->
    <script src="https://cdn.jsdelivr.net/npm/ffmpeg.js@4.2.9003/dist/ffmpeg.min.js"></script>
    <script>
        // DOM å…ƒç´ 
        const uploadArea = document.getElementById('upload-area');
        const fileInput = document.getElementById('file-input');
        const selectFileBtn = document.getElementById('select-file-btn');
        const formatSection = document.getElementById('format-section');
        const sourceFileInfo = document.getElementById('source-file-info');
        const targetFormat = document.getElementById('target-format');
        const quality = document.getElementById('quality');
        const convertBtn = document.getElementById('convert-btn');
        const resetBtn = document.getElementById('reset-btn');
        const progressSection = document.getElementById('progress-section');
        const progressFill = document.getElementById('progress-fill');
        const progressText = document.getElementById('progress-text');
        const loader = document.getElementById('loader');
        const resultSection = document.getElementById('result-section');
        const resultFilename = document.getElementById('result-filename');
        const resultFormat = document.getElementById('result-format');
        const resultQuality = document.getElementById('result-quality');
        const downloadBtn = document.getElementById('download-btn');
        const convertAnotherBtn = document.getElementById('convert-another-btn');
        const successAlert = document.getElementById('success-alert');
        const errorAlert = document.getElementById('error-alert');

        // å…¨å±€å˜é‡
        let selectedFile = null;
        let convertedBlob = null;
        let ffmpeg = null;

        // æ”¯æŒçš„æ ¼å¼æ˜ å°„
        const FORMAT_MAP = {
            mp3: { mime: 'audio/mpeg', ext: 'mp3' },
            wav: { mime: 'audio/wav', ext: 'wav' },
            flac: { mime: 'audio/flac', ext: 'flac' },
            m4a: { mime: 'audio/mp4', ext: 'm4a' },
            ogg: { mime: 'audio/ogg', ext: 'ogg' }
        };

        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
        function initEventListeners() {
            // ä¸Šä¼ åŒºåŸŸç‚¹å‡»äº‹ä»¶
            uploadArea.addEventListener('click', (e) => {
                if (e.target !== selectFileBtn) {
                    fileInput.click();
                }
                e.stopPropagation();
            });

            // é€‰æ‹©æ–‡ä»¶æŒ‰é’®
            selectFileBtn.addEventListener('click', (e) => {
                fileInput.click();
                e.stopPropagation();
            });

            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶
            fileInput.addEventListener('change', handleFileSelect);

            // æ‹–æ‹½ä¸Šä¼ 
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = 'var(--primary)';
            });

            uploadArea.addEventListener('dragleave', () => {
                uploadArea.style.borderColor = 'var(--gray-200)';
            });

            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = 'var(--gray-200)';
                
                if (e.dataTransfer.files.length) {
                    fileInput.files = e.dataTransfer.files;
                    handleFileSelect(e);
                }
            });

            // è½¬æ¢æŒ‰é’®
            convertBtn.addEventListener('click', startConversion);

            // é‡ç½®æŒ‰é’®
            resetBtn.addEventListener('click', resetApp);

            // ä¸‹è½½æŒ‰é’®
            downloadBtn.addEventListener('click', downloadConvertedFile);

            // è½¬æ¢å¦ä¸€ä¸ªæ–‡ä»¶
            convertAnotherBtn.addEventListener('click', () => {
                resetApp();
            });
        }

        // åˆå§‹åŒ– FFmpeg
        async function initFFmpeg() {
            if (ffmpeg) return ffmpeg;
            
            showProgress(0, 'æ­£åœ¨åŠ è½½éŸ³é¢‘å¤„ç†å¼•æ“...');
            progressSection.style.display = 'block';

            try {
                ffmpeg = createFFmpeg({
                    log: true,
                    corePath: 'https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.6/dist/ffmpeg-core.js'
                });

                // ç›‘å¬æ—¥å¿—æ›´æ–°è¿›åº¦
                ffmpeg.setLogger(({ type, message }) => {
                    if (type === 'info' && message.includes('frame=')) {
                        const progressMatch = message.match(/time=(\d+:\d+:\d+\.\d+)/);
                        if (progressMatch) {
                            // ç®€å•è¿›åº¦è®¡ç®—ï¼ˆå®é™…å¯æ ¹æ®æ€»æ—¶é•¿ä¼˜åŒ–ï¼‰
                            const currentProgress = Math.min(90, parseInt(progressFill.style.width) + 1);
                            showProgress(currentProgress, `æ­£åœ¨è½¬æ¢ï¼š${message.substring(0, 50)}...`);
                        }
                    }
                });

                await ffmpeg.load();
                showProgress(10, 'éŸ³é¢‘å¤„ç†å¼•æ“åŠ è½½å®Œæˆï¼');
                return ffmpeg;
            } catch (error) {
                throw new Error('FFmpeg åˆå§‹åŒ–å¤±è´¥ï¼š' + error.message);
            }
        }

        // å¤„ç†æ–‡ä»¶é€‰æ‹©
        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (!file) return;

            // æ£€æŸ¥æ–‡ä»¶ç±»å‹
            if (!file.type.startsWith('audio/') && !['.mp3', '.wav', '.flac', '.ogg', '.aac', '.m4a'].some(ext => file.name.endsWith(ext))) {
                showAlert('error', 'è¯·é€‰æ‹©æœ‰æ•ˆçš„éŸ³é¢‘æ–‡ä»¶ï¼');
                return;
            }

            selectedFile = file;
            hideAlerts();
            
            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯
            const fileSize = (file.size / 1024 / 1024).toFixed(2);
            sourceFileInfo.textContent = `${file.name} (${fileSize} MB)`;
            
            // æ˜¾ç¤ºæ ¼å¼é€‰æ‹©åŒºåŸŸ
            formatSection.style.display = 'block';
            resultSection.style.display = 'none';
            progressSection.style.display = 'none';
        }

        // å¼€å§‹è½¬æ¢
        async function startConversion() {
            if (!selectedFile) {
                showAlert('error', 'è¯·å…ˆé€‰æ‹©éŸ³é¢‘æ–‡ä»¶ï¼');
                return;
            }

            try {
                // åˆå§‹åŒ– FFmpeg
                await initFFmpeg();

                // è·å–è½¬æ¢å‚æ•°
                const targetFormatVal = targetFormat.value;
                const qualityVal = quality.value;
                const formatInfo = FORMAT_MAP[targetFormatVal];
                const sourceFilename = `source.${selectedFile.name.split('.').pop()}`;
                const outputFilename = `output.${formatInfo.ext}`;

                // æ˜¾ç¤ºè¿›åº¦
                showProgress(10, 'æ­£åœ¨è¯»å–æºæ–‡ä»¶...');
                progressSection.style.display = 'block';
                formatSection.style.display = 'none';
                hideAlerts();

                // å†™å…¥æ–‡ä»¶åˆ° FFmpeg è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ
                showProgress(20, 'æ­£åœ¨å‡†å¤‡è½¬æ¢...');
                ffmpeg.FS('writeFile', sourceFilename, await fetchFile(selectedFile));

                // æ„å»ºè½¬æ¢å‘½ä»¤
                let cmd = ['-i', sourceFilename];
                
                // æ ¹æ®ç›®æ ‡æ ¼å¼æ·»åŠ å‚æ•°
                switch (targetFormatVal) {
                    case 'mp3':
                        cmd = cmd.concat(['-b:a', `${qualityVal}k`, '-f', 'mp3', outputFilename]);
                        break;
                    case 'wav':
                        cmd = cmd.concat(['-f', 'wav', outputFilename]);
                        break;
                    case 'flac':
                        cmd = cmd.concat(['-f', 'flac', outputFilename]);
                        break;
                    case 'm4a':
                        cmd = cmd.concat(['-c:a', 'aac', '-b:a', `${qualityVal}k`, outputFilename]);
                        break;
                    case 'ogg':
                        cmd = cmd.concat(['-c:a', 'libvorbis', '-b:a', `${qualityVal}k`, outputFilename]);
                        break;
                }

                // æ‰§è¡Œè½¬æ¢
                showProgress(30, 'å¼€å§‹è½¬æ¢éŸ³é¢‘æ ¼å¼...');
                await ffmpeg.run(...cmd);

                // è¯»å–è½¬æ¢åçš„æ–‡ä»¶
                showProgress(95, 'è½¬æ¢å®Œæˆï¼Œæ­£åœ¨å¤„ç†ç»“æœ...');
                const data = ffmpeg.FS('readFile', outputFilename);
                convertedBlob = new Blob([data.buffer], { type: formatInfo.mime });

                // æ¸…ç†è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ
                ffmpeg.FS('unlink', sourceFilename);
                ffmpeg.FS('unlink', outputFilename);

                // æ˜¾ç¤ºç»“æœ
                showProgress(100, 'è½¬æ¢å®Œæˆï¼');
                setTimeout(() => {
                    progressSection.style.display = 'none';
                    resultSection.style.display = 'block';
                    
                    // æ›´æ–°ç»“æœä¿¡æ¯
                    const originalName = selectedFile.name.split('.').slice(0, -1).join('.');
                    const resultName = `${originalName}.${formatInfo.ext}`;
                    resultFilename.textContent = resultName;
                    resultFormat.textContent = targetFormat.options[targetFormat.selectedIndex].text;
                    resultQuality.textContent = quality.options[quality.selectedIndex].text;

                    showAlert('success', `éŸ³é¢‘è½¬æ¢æˆåŠŸï¼æ–‡ä»¶æ ¼å¼ï¼š${formatInfo.ext.toUpperCase()}`);
                }, 500);

            } catch (error) {
                progressSection.style.display = 'none';
                formatSection.style.display = 'block';
                showAlert('error', 'è½¬æ¢å¤±è´¥ï¼š' + error.message);
                console.error('è½¬æ¢é”™è¯¯ï¼š', error);
            }
        }

        // æ˜¾ç¤ºè¿›åº¦
        function showProgress(percent, text) {
            progressFill.style.width = `${percent}%`;
            progressText.textContent = text;
        }

        // ä¸‹è½½è½¬æ¢åçš„æ–‡ä»¶
        function downloadConvertedFile() {
            if (!convertedBlob) return;

            try {
                const targetFormatVal = targetFormat.value;
                const formatInfo = FORMAT_MAP[targetFormatVal];
                const originalName = selectedFile.name.split('.').slice(0, -1).join('.');
                const filename = `${originalName}.${formatInfo.ext}`;

                // åˆ›å»ºä¸‹è½½é“¾æ¥
                const url = URL.createObjectURL(convertedBlob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();

                // æ¸…ç†
                setTimeout(() => {
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    showAlert('success', 'æ–‡ä»¶ä¸‹è½½æˆåŠŸï¼');
                }, 100);

            } catch (error) {
                showAlert('error', 'ä¸‹è½½å¤±è´¥ï¼š' + error.message);
            }
        }

        // æ˜¾ç¤ºæç¤ºä¿¡æ¯
        function showAlert(type, message) {
            hideAlerts();
            const alert = document.getElementById(`${type}-alert`);
            alert.textContent = message;
            alert.style.display = 'block';
            
            // 3ç§’åè‡ªåŠ¨éšè—ï¼ˆé”™è¯¯æç¤ºä¸è‡ªåŠ¨éšè—ï¼‰
            if (type === 'success') {
                setTimeout(hideAlerts, 3000);
            }
        }

        // éšè—æ‰€æœ‰æç¤º
        function hideAlerts() {
            successAlert.style.display = 'none';
            errorAlert.style.display = 'none';
        }

        // é‡ç½®åº”ç”¨
        function resetApp() {
            fileInput.value = '';
            selectedFile = null;
            convertedBlob = null;
            sourceFileInfo.textContent = 'æœªé€‰æ‹©æ–‡ä»¶';
            
            // é‡ç½®UI
            hideAlerts();
            formatSection.style.display = 'none';
            progressSection.style.display = 'none';
            resultSection.style.display = 'none';
            progressFill.style.width = '0%';
            progressText.textContent = 'å‡†å¤‡è½¬æ¢...';
        }

        // åˆå§‹åŒ–
        window.onload = () => {
            initEventListeners();
            // é¢„åŠ è½½ FFmpeg æ ¸å¿ƒï¼ˆå¯é€‰ï¼‰
            // initFFmpeg().catch(err => console.log('FFmpeg é¢„åŠ è½½å¤±è´¥ï¼š', err));
        };

        // å…¼å®¹å¤„ç†
        if (!window.createFFmpeg) {
            // åŠ è½½ FFmpeg åº“
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/@ffmpeg/ffmpeg@0.12.10/dist/ffmpeg.min.js';
            script.onload = initEventListeners;
            document.head.appendChild(script);
        }
    </script>
</body>
</html>